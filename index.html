<!DOCTYPE html>
<html>
<head>
	<title>AGIS Map Editor</title>
	<meta charset="utf-8" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
    <link rel="stylesheet" href="http://leaflet.github.io/Leaflet.draw/leaflet.draw.css" />
    <link rel="stylesheet" href="css/easy-button.css" />
    <link rel="stylesheet" href="css/site.css" media="screen" />
<!--    <link rel="stylesheet" href="css/print.css" media="print"/>-->
    <link rel="stylesheet" href="css/w3.css" />
    <link rel="stylesheet" href="/css/leaflet.css" />
    <link rel="stylesheet" href="/css/leaflet.label.css" />
    <link rel="stylesheet" href="/css/leaflet-messagebox.css" />
<!--    <link rel="stylesheet" href="/css/leaflet.tooltip.css" />-->
    <link rel="stylesheet" href="/css/leaflet-areaselect.css" />
    <link rel="stylesheet" href="/css/jquery-ui.min.css" />
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js'></script>
    <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
    <script src="/js/lib/leaflet-src.js"></script>
     <script src="/js/lib/leaflet.draw-src.js"></script>
     <script src="/js/lib/leaflet-messagebox.js"></script>
    <script src="/js/lib/leaflet.label.js"></script>
<!--    <script src="/js/lib/leaflet.tooltip.js"></script>-->
    <script src="/js/lib/leaflet-areaselect.js"></script>
    <script src="/js/printout.js"></script>
    <script src="/js/locations.js"></script>
    <script src="/js/lib/jquery-ui.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyB95jRLaAAIC2_9wACuK_R6kTN04xj2vyo",
        authDomain: "agis-map-editor.firebaseapp.com",
        databaseURL: "https://agis-map-editor.firebaseio.com",
        storageBucket: "agis-map-editor.appspot.com",
      };
      firebase.initializeApp(config);
        
    </script>
</head>
<body class="w3-light-grey">
<div class="w3-container w3-top w3-dark-grey w3-large w3-padding" style="z-index:4" id="topbar">
  <button class="w3-btn w3-hide-large w3-padding-0 w3-hover-text-grey" onclick="w3_open();"><i class="fa fa-bars"></i> Â Menu</button>
  <img class="w3-left logo" src="images/ac_web_app_log.png">
    
    <a href="http://www.agis.co.nz" target="_blank"><img class="w3-right companylogo" src="images/Agis_web_logo_buffer.png"></a>
<div id="userDetails" class="w3-right w3-medium">
        <p>Hi, <span id="fbName"></span><br />
        <a href="#" onclick="logout()">Logout</a></p>
    </div>
    <div class="w3-right w3-medium" style="display: none">
        <select id="selectPrintRatio">
            <option value="[250, 300]" selected="selected">Portrait</option>
            <option value="[300, 250]">Landscape A2</option>
            <option value="[350, 200]">Landscape A3</option>
            <option value="[400, 100]">Landscape A4</option>
          </select>
    </div>
    <div class="w3-right w3-medium" style="display: none"><button id='selectPrintArea'>Select Print Area</button></div>
    <div class="w3-right w3-medium" style="display: none"><button id='printButton'>Print</button></div>
    </div>
    
<div class="w3-sidenav w3-collapse w3-animate-left" style="z-index:3;width:300px;" id="sidePanel">
    <div class="w3-container" style="padding:1em;position:relative">
        <div>
            <div>
                <div id="mapControls" style="display:none">
<!--                        <a href="/profile.html">Profile</a><br />-->
                    <div id="locationContainer" class="w3-container">
                        <select class="w3-select" id="location" onchange="locationSwitch(this)">
                            <option value="" disabled selected>Select Location</option>
                        </select>
                    </div>
                    <br />
                    <div id='featuregrid' class="accordion"></div>
                    <br />
                </div>
                <textarea id="JSONBox" style="display:none;width: 5px; height 5px" rows="1" cols="1" ></textarea>
            </div>
        </div>
        <div id='historylist' class="accordion"></div>
    </div>
</div>
    <div id='mappane' class="w3-main" style="margin-left:300px;">
        <div id="map"></div>
    </div>
    
<div id="dialog-login" title="Log in">
    <div id="userLoginContainer">
        <label for="email">Email</label><br />
        <input type="text" id="email" style="width:90%;"><br>
        <label for="password">Password</label><br />
        <input type="password" id="password" style="width:90%;">
        <br><br />
        <button onclick="userLogin()">Login</button><br /><br />
<!--        <a href="/register.html">Sign up</a><br />-->
<!--        <a href="#">Forgotten Password</a>-->
        <label class="validateTips"></label>
    </div>
</div>
<script>
    dialog = $( "#dialog-login" ).dialog({
      autoOpen: true,
      height: 250,
      width: 350,
      modal: true,
      draggable: false,
      resizable: false,
      dialogClass: "no-close"
//      buttons: {
//        "Login": userLogin,
//        Cancel: function() {
//          dialog.dialog( "close" );
//        }
//      },
//      close: function() {
//        form[ 0 ].reset();
//        allFields.removeClass( "ui-state-error" );
//      }
    });
</script>
    
    <script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '619432824875705',
      xfbml      : true,
      version    : 'v2.6'
    });
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>
    
    <script>
        var rootRef = firebase.database();
    </script>
    
    <div id="images"></div>
    
    <script src="/js/custom-map.js"></script>
    <script src="/js/custom-markers.js"></script>
</body>
    
</html>
